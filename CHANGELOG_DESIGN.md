# RepoSense ä»£ç æ›´æ–°æ€»ç»“åŠŸèƒ½è®¾è®¡æ–‡æ¡£

## 1. åŠŸèƒ½æ¦‚è¿°

### 1.1 èƒŒæ™¯ä¸åŠ¨æœº

RepoSense å·²ç»å®ç°äº†é«˜æ•ˆçš„æ‰¹é‡ä»£ç åº“æ›´æ–°åŠŸèƒ½ï¼Œä½†ä»…çŸ¥é“å“ªäº›ä»£ç åº“æœ‰æ›´æ–°æ˜¯ä¸å¤Ÿçš„ã€‚å¼€å‘è€…éœ€è¦å¿«é€Ÿäº†è§£æ¯ä¸ªä»£ç åº“çš„å…·ä½“æ›´æ–°å†…å®¹ï¼Œä»¥ä¾¿ï¼š
- è·Ÿè¸ªå…³æ³¨çš„å¼€æºé¡¹ç›®çš„æœ€æ–°è¿›å±•
- è¯„ä¼°æ˜¯å¦éœ€è¦æ›´æ–°ä¾èµ–ç‰ˆæœ¬
- äº†è§£æ–°åŠŸèƒ½å’Œä¿®å¤çš„é—®é¢˜
- æŠŠæ¡æŠ€æœ¯è¶‹åŠ¿å’Œæœ€ä½³å®è·µ

### 1.2 åŠŸèƒ½å®šä½

æ–°å¢ `reposense changelog` å­å‘½ä»¤ï¼Œç”¨äºç”ŸæˆæŒ‡å®šæ—¶é—´èŒƒå›´å†…æœ‰æ›´æ–°çš„ä»£ç åº“çš„å˜æ›´æ€»ç»“æŠ¥å‘Šã€‚è¯¥åŠŸèƒ½å°†ï¼š
- è‡ªåŠ¨è¯†åˆ«æœ‰æ–°æäº¤çš„ä»£ç åº“
- æ™ºèƒ½åˆ†æå’Œæ€»ç»“æ›´æ–°å†…å®¹
- æ”¯æŒå¤šè¯­è¨€æ€»ç»“è¾“å‡º
- æä¾›çµæ´»çš„æŠ¥å‘Šæ ¼å¼

## 2. è®¾è®¡ç›®æ ‡

### 2.1 æ ¸å¿ƒç›®æ ‡
- **é«˜æ•ˆæ€§**: åˆ©ç”¨å¹¶å‘å¤„ç†å¿«é€Ÿåˆ†æå¤§é‡ä»£ç åº“
- **å‡†ç¡®æ€§**: å‡†ç¡®æå–å’Œæ€»ç»“å…³é”®æ›´æ–°ä¿¡æ¯
- **æ˜“ç”¨æ€§**: ç®€å•ç›´è§‚çš„å‘½ä»¤è¡Œæ¥å£
- **çµæ´»æ€§**: æ”¯æŒå¤šç§æ€»ç»“ç­–ç•¥å’Œè¾“å‡ºæ ¼å¼
- **å¯æ‰©å±•æ€§**: ä¾¿äºæœªæ¥æ·»åŠ æ–°çš„åˆ†æç»´åº¦

### 2.2 éåŠŸèƒ½æ€§éœ€æ±‚
- æ€§èƒ½ï¼šèƒ½åœ¨åˆç†æ—¶é—´å†…å¤„ç† 100+ ä¸ªä»£ç åº“
- å¯é æ€§ï¼šå•ä¸ªä»£ç åº“åˆ†æå¤±è´¥ä¸å½±å“æ•´ä½“æ‰§è¡Œ
- å…¼å®¹æ€§ï¼šæ”¯æŒå„ç§ Git å·¥ä½œæµå’Œæäº¤è§„èŒƒ
- å›½é™…åŒ–ï¼šæ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ç­‰å¤šè¯­è¨€è¾“å‡º

## 3. æŠ€æœ¯æ–¹æ¡ˆ

### 3.1 æ€»ç»“ç­–ç•¥æ¯”è¾ƒ

#### 3.1.1 åŸºäº Commit Message çš„æ€»ç»“

**ä¼˜åŠ¿ï¼š**
- æ‰§è¡Œé€Ÿåº¦å¿«ï¼Œåªéœ€è¯»å– git log
- èµ„æºæ¶ˆè€—å°ï¼Œä¸éœ€è¦åˆ†æä»£ç å†…å®¹
- ä¿¡æ¯å¯†åº¦é«˜ï¼Œcommit message é€šå¸¸åŒ…å«å…³é”®ä¿¡æ¯
- é€‚åˆè§„èŒƒçš„é¡¹ç›®ï¼ˆå¦‚éµå¾ª Conventional Commitsï¼‰

**åŠ£åŠ¿ï¼š**
- ä¾èµ– commit message è´¨é‡
- å¯èƒ½é—æ¼ä»£ç å±‚é¢çš„é‡è¦å˜åŒ–
- å¯¹ä¸è§„èŒƒçš„æäº¤ä¿¡æ¯æ•ˆæœå·®

#### 3.1.2 åŸºäºä»£ç å·®åˆ†çš„æ€»ç»“

**ä¼˜åŠ¿ï¼š**
- æ›´å‡†ç¡®åœ°åæ˜ å®é™…ä»£ç å˜åŒ–
- ä¸ä¾èµ– commit message è´¨é‡
- å¯ä»¥è¯†åˆ«é‡å¤§æ¶æ„å˜æ›´
- èƒ½åˆ†æå…·ä½“çš„åŠŸèƒ½æ”¹åŠ¨

**åŠ£åŠ¿ï¼š**
- è®¡ç®—æˆæœ¬é«˜ï¼Œéœ€è¦å¤§é‡ diff æ“ä½œ
- å¯èƒ½äº§ç”Ÿè¿‡å¤šå™ªéŸ³ï¼ˆå¦‚æ ¼å¼åŒ–ã€é‡æ„ï¼‰
- éœ€è¦æ›´å¤æ‚çš„ LLM æç¤ºè¯
- API è°ƒç”¨æˆæœ¬æ›´é«˜

### 3.2 æ¨èæ–¹æ¡ˆï¼šæ··åˆç­–ç•¥

é‡‡ç”¨**åˆ†å±‚æ¸è¿›å¼**çš„æ··åˆç­–ç•¥ï¼š

1. **å¿«é€Ÿæ¨¡å¼**ï¼ˆé»˜è®¤ï¼‰ï¼šåŸºäº commit message
2. **æ·±åº¦æ¨¡å¼**ï¼šcommit message + å…³é”®æ–‡ä»¶å·®åˆ†
3. **å®Œæ•´æ¨¡å¼**ï¼šå…¨é‡ä»£ç å·®åˆ†åˆ†æ

```go
type AnalysisMode string

const (
    ModeFast    AnalysisMode = "fast"    // ä»… commit message
    ModeDeep    AnalysisMode = "deep"    // commit + å…³é”®æ–‡ä»¶
    ModeFull    AnalysisMode = "full"    // å®Œæ•´å·®åˆ†åˆ†æ
)
```

## 4. è¯¦ç»†è®¾è®¡

### 4.1 å‘½ä»¤è¡Œæ¥å£

```bash
# åŸºæœ¬ç”¨æ³•ï¼šåˆ†ææœ€è¿‘ä¸€å¤©çš„æ›´æ–°
reposense changelog [directory]

# æŒ‡å®šæ—¶é—´èŒƒå›´
reposense changelog --since="2025-06-01" --until="2025-06-03"
reposense changelog --days=7  # æœ€è¿‘7å¤©

# æŒ‡å®šåˆ†ææ¨¡å¼
reposense changelog --mode=deep

# æŒ‡å®šè¾“å‡ºè¯­è¨€å’Œæ ¼å¼  
reposense changelog --language=zh --format=markdown

# è¿‡æ»¤ç‰¹å®šä»“åº“ï¼ˆä½¿ç”¨ç°æœ‰çš„è¿‡æ»¤ç³»ç»Ÿï¼‰
reposense changelog --include="project-*" --exclude="*-test"

# ä¿å­˜æŠ¥å‘Š
reposense changelog --save-report --report-file=weekly-changelog.md

# å¯ç”¨LLMå¢å¼ºæ€»ç»“ï¼ˆå¤ç”¨ç°æœ‰LLMé…ç½®ï¼‰
reposense changelog --enable-llm --llm-provider=openai --llm-model=gpt-4
```

### 4.2 æ ¸å¿ƒæ•°æ®ç»“æ„

```go
// ChangelogEntry å•ä¸ªä»“åº“çš„å˜æ›´è®°å½•
type ChangelogEntry struct {
    Repository   scanner.Repository  // å¤ç”¨ç°æœ‰çš„Repositoryç»“æ„
    TimeRange    TimeRange
    Commits      []Commit
    Summary      Summary
    Stats        ChangeStats
    UpdatedAt    time.Time
}

// Commit æäº¤ä¿¡æ¯ï¼ˆå…¼å®¹git logè¾“å‡ºï¼‰
type Commit struct {
    Hash      string    `json:"hash"`
    Author    string    `json:"author"`
    Date      time.Time `json:"date"`
    Message   string    `json:"message"`
    ShortMsg  string    `json:"short_message"`
}

// Summary å˜æ›´æ€»ç»“
type Summary struct {
    Title        string              // ä¸€å¥è¯æ€»ç»“
    Highlights   []string            // è¦ç‚¹åˆ—è¡¨
    Categories   map[string][]string // åˆ†ç±»æ€»ç»“ï¼ˆfeatures, fixes, docsç­‰ï¼‰
    Language     string              // æ€»ç»“è¯­è¨€
    GeneratedBy  string              // ç”Ÿæˆæ–¹å¼ï¼ˆrule-basedæˆ–llmï¼‰
}

// ChangeStats å˜æ›´ç»Ÿè®¡
type ChangeStats struct {
    CommitCount     int
    AuthorCount     int  
    FilesChanged    int
    Insertions      int
    Deletions       int
    MajorChanges    []string // é‡å¤§å˜æ›´æ ‡è¯†
}

// TimeRange æ—¶é—´èŒƒå›´
type TimeRange struct {
    Since time.Time
    Until time.Time
}

// ChangelogReport å®Œæ•´çš„å˜æ›´æ—¥å¿—æŠ¥å‘Š
type ChangelogReport struct {
    TimeRange   TimeRange         `json:"time_range"`
    TotalRepos  int              `json:"total_repos"`
    UpdatedRepos int             `json:"updated_repos"`
    Entries     []ChangelogEntry `json:"entries"`
    GeneratedAt time.Time        `json:"generated_at"`
    Config      ChangelogConfig  `json:"config"`
}

// ChangelogConfig åˆ†æé…ç½®
type ChangelogConfig struct {
    Mode          AnalysisMode `json:"mode"`
    Language      string       `json:"language"`
    EnableLLM     bool         `json:"enable_llm"`
    LLMProvider   string       `json:"llm_provider,omitempty"`
    LLMModel      string       `json:"llm_model,omitempty"`
}
```

### 4.3 å¤„ç†æµç¨‹

```mermaid
graph TD
    A[å¼€å§‹] --> B[è§£æå‘½ä»¤å‚æ•°]
    B --> C[æ‰«ææ‰€æœ‰ä»“åº“]
    C --> D[ç­›é€‰æœ‰æ›´æ–°çš„ä»“åº“]
    D --> E{å¹¶å‘å¤„ç†æ¯ä¸ªä»“åº“}
    E --> F[è·å–æ—¶é—´èŒƒå›´å†…çš„commits]
    F --> G{åˆ†ææ¨¡å¼?}
    G -->|Fast| H[åˆ†æcommit messages]
    G -->|Deep| I[åˆ†æcommits + å…³é”®æ–‡ä»¶]
    G -->|Full| J[å®Œæ•´å·®åˆ†åˆ†æ]
    H --> K[ç”Ÿæˆåˆæ­¥æ€»ç»“]
    I --> K
    J --> K
    K --> L{å¯ç”¨LLM?}
    L -->|æ˜¯| M[LLMä¼˜åŒ–æ€»ç»“]
    L -->|å¦| N[è§„åˆ™å¼•æ“æ€»ç»“]
    M --> O[æ ¼å¼åŒ–è¾“å‡º]
    N --> O
    O --> P[èšåˆæ‰€æœ‰ç»“æœ]
    P --> Q[ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š]
    Q --> R[ç»“æŸ]
```

### 4.4 æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 4.4.1 ChangelogAnalyzer

```go
// ChangelogAnalyzer å˜æ›´æ—¥å¿—åˆ†æå™¨
type ChangelogAnalyzer struct {
    scanner      *scanner.Scanner      // å¤ç”¨ç°æœ‰æ‰«æå™¨
    llmService   *llm.DescriptionService // å¤ç”¨ç°æœ‰LLMæœåŠ¡  
    reporter     *reporter.Reporter    // å¤ç”¨ç°æœ‰æŠ¥å‘Šå™¨
    workers      int
    timeout      time.Duration
    logger       *logrus.Logger
}

// ChangelogOptions åˆ†æé€‰é¡¹
type ChangelogOptions struct {
    Directory       string
    Mode           AnalysisMode
    TimeRange      TimeRange
    Language       string
    EnableLLM      bool
    LLMProvider    string
    LLMModel       string
    IncludePatterns []string
    ExcludePatterns []string
    OutputFormat   reporter.ReportFormat
    SaveReport     bool
    ReportFile     string
    WorkerCount    int
    Timeout        time.Duration
}

// NewChangelogAnalyzer åˆ›å»ºæ–°çš„åˆ†æå™¨å®ä¾‹
func NewChangelogAnalyzer(opts ChangelogOptions) *ChangelogAnalyzer {
    // åˆå§‹åŒ–æ‰«æå™¨
    scannerInstance := scanner.NewScanner()
    
    // åˆå§‹åŒ–LLMæœåŠ¡ï¼ˆå¦‚æœå¯ç”¨ï¼‰
    var llmService *llm.DescriptionService
    if opts.EnableLLM {
        llmService = llm.NewDescriptionService(
            llm.Provider(opts.LLMProvider),
            opts.LLMModel,
            "", // API Keyä»ç¯å¢ƒå˜é‡è¯»å–
            "",
            opts.Language,
            opts.Timeout,
            true,
        )
    }
    
    // åˆå§‹åŒ–æŠ¥å‘Šå™¨
    reporterInstance := reporter.NewReporter(opts.OutputFormat, false)
    
    return &ChangelogAnalyzer{
        scanner:    scannerInstance,
        llmService: llmService,
        reporter:   reporterInstance,
        workers:    opts.WorkerCount,
        timeout:    opts.Timeout,
        logger:     logrus.New(),
    }
}

// Analyze æ‰§è¡Œå˜æ›´æ—¥å¿—åˆ†æ
func (a *ChangelogAnalyzer) Analyze(opts ChangelogOptions) (*ChangelogReport, error) {
    // 1. æ‰«æä»“åº“ï¼ˆå¤ç”¨ç°æœ‰é€»è¾‘ï¼‰
    repos, err := a.scanner.ScanDirectoryWithFilter(opts.Directory, opts.IncludePatterns, opts.ExcludePatterns)
    if err != nil {
        return nil, fmt.Errorf("æ‰«æä»“åº“å¤±è´¥: %w", err)
    }
    
    // 2. ç­›é€‰æœ‰æ›´æ–°çš„ä»“åº“
    updatedRepos := a.filterUpdatedRepos(repos, opts.TimeRange)
    
    // 3. å¹¶å‘åˆ†ææ¯ä¸ªä»“åº“
    entries := a.analyzeReposParallel(updatedRepos, opts)
    
    // 4. ç”Ÿæˆå®Œæ•´æŠ¥å‘Š
    report := &ChangelogReport{
        TimeRange:   opts.TimeRange,
        TotalRepos:  len(repos),
        UpdatedRepos: len(updatedRepos),
        Entries:     entries,
        GeneratedAt: time.Now(),
        Config: ChangelogConfig{
            Mode:        opts.Mode,
            Language:    opts.Language,
            EnableLLM:   opts.EnableLLM,
            LLMProvider: opts.LLMProvider,
            LLMModel:    opts.LLMModel,
        },
    }
    
    return report, nil
}
```

#### 4.4.2 CommitAnalyzer

```go
type CommitAnalyzer struct {
    conventionalCommit bool
    languageDetector   *LanguageDetector
}

func (ca *CommitAnalyzer) AnalyzeCommits(commits []Commit) *CommitAnalysis {
    return &CommitAnalysis{
        Features:     ca.extractFeatures(commits),
        Fixes:        ca.extractFixes(commits),
        Breaking:     ca.extractBreaking(commits),
        Dependencies: ca.extractDependencies(commits),
        Refactoring:  ca.extractRefactoring(commits),
    }
}
```

#### 4.4.3 DiffAnalyzer

```go
type DiffAnalyzer struct {
    ignorePatterns []string
    keyFileDetector *KeyFileDetector
}

func (da *DiffAnalyzer) AnalyzeDiff(repo Repository, since, until string) *DiffAnalysis {
    // è·å–å·®åˆ†
    diff := da.getDiff(repo, since, until)
    
    return &DiffAnalysis{
        KeyFileChanges:   da.analyzeKeyFiles(diff),
        APIChanges:       da.detectAPIChanges(diff),
        ConfigChanges:    da.detectConfigChanges(diff),
        DependencyChanges: da.detectDependencyChanges(diff),
    }
}
```

### 4.5 LLM é›†æˆè®¾è®¡

```go
type ChangelogLLMEnhancer struct {
    provider LLMProvider
    model    string
    language string
}

func (e *ChangelogLLMEnhancer) EnhanceSummary(analysis *ChangelogAnalysis) (*Summary, error) {
    prompt := e.buildPrompt(analysis)
    response := e.provider.Complete(prompt)
    return e.parseSummary(response)
}

// æç¤ºè¯æ¨¡æ¿ç¤ºä¾‹
const changelogPromptTemplate = `
åˆ†æä»¥ä¸‹ä»£ç åº“åœ¨ {{.TimeRange}} æœŸé—´çš„æ›´æ–°å†…å®¹ï¼š

ä»“åº“åç§°: {{.RepoName}}
æäº¤æ•°é‡: {{.CommitCount}}
ä¸»è¦æäº¤ä¿¡æ¯:
{{range .Commits}}
- {{.Message}}
{{end}}

{{if .DiffAnalysis}}
å…³é”®å˜æ›´:
{{.DiffAnalysis}}
{{end}}

è¯·ç”¨{{.Language}}ç”Ÿæˆä¸€ä»½ç®€æ´çš„æ›´æ–°æ€»ç»“ï¼ŒåŒ…æ‹¬ï¼š
1. ä¸€å¥è¯æ¦‚è¿°ï¼ˆä¸è¶…è¿‡50å­—ï¼‰
2. 3-5ä¸ªè¦ç‚¹
3. æŒ‰ç±»åˆ«åˆ†ç»„çš„è¯¦ç»†å˜æ›´ï¼ˆåŠŸèƒ½/ä¿®å¤/æ€§èƒ½/æ–‡æ¡£ç­‰ï¼‰

è¾“å‡ºæ ¼å¼è¦æ±‚ä¸ºJSONã€‚
`
```

### 4.6 è¾“å‡ºæ ¼å¼è®¾è®¡

#### 4.6.1 Markdown æ ¼å¼

```markdown
# RepoSense ä»£ç åº“æ›´æ–°æŠ¥å‘Š

**æ—¶é—´èŒƒå›´**: 2025-06-01 è‡³ 2025-06-03  
**æ‰«æä»“åº“**: 250 ä¸ª  
**æœ‰æ›´æ–°ä»“åº“**: 23 ä¸ª

## æ›´æ–°æ¦‚è§ˆ

### ğŸ”¥ é‡å¤§æ›´æ–°

#### kubernetes/kubernetes
> Kubernetes 1.29 å‘å¸ƒï¼šå¼•å…¥åŸç”Ÿè¾¹ç¼˜è®¡ç®—æ”¯æŒå’Œ AI å·¥ä½œè´Ÿè½½ä¼˜åŒ–

- âœ¨ æ–°å¢ EdgeNode èµ„æºç±»å‹ï¼Œæ”¯æŒè¾¹ç¼˜èŠ‚ç‚¹ç®¡ç†
- ğŸš€ GPU è°ƒåº¦å™¨æ€§èƒ½æå‡ 40%
- ğŸ› ä¿®å¤äº† 15 ä¸ªå®‰å…¨æ¼æ´
- ğŸ“š æ›´æ–°äº†ä¸­æ–‡æ–‡æ¡£

**ç»Ÿè®¡**: 127 commits | 45 contributors | +12,450 -8,920 lines

---

### ğŸ“Š æŒ‰ç±»åˆ«ç»Ÿè®¡

| ç±»åˆ« | ä»“åº“æ•° | ä¸»è¦æ›´æ–° |
|------|--------|----------|
| ğŸ†• æ–°åŠŸèƒ½ | 12 | AIé›†æˆã€æ€§èƒ½ä¼˜åŒ–ã€APIå¢å¼º |
| ğŸ› Bugä¿®å¤ | 18 | å®‰å…¨ä¿®å¤ã€ç¨³å®šæ€§æ”¹è¿› |
| ğŸ“š æ–‡æ¡£ | 8 | APIæ–‡æ¡£ã€ä½¿ç”¨æŒ‡å—æ›´æ–° |
| ğŸ”§ ç»´æŠ¤ | 15 | ä¾èµ–æ›´æ–°ã€ä»£ç é‡æ„ |
```

#### 4.6.2 JSON æ ¼å¼

```json
{
  "report": {
    "timeRange": {
      "since": "2025-06-01T00:00:00Z",
      "until": "2025-06-03T23:59:59Z"
    },
    "statistics": {
      "totalRepos": 250,
      "updatedRepos": 23,
      "totalCommits": 892,
      "totalAuthors": 234
    },
    "entries": [
      {
        "repository": "kubernetes/kubernetes",
        "summary": {
          "title": "Kubernetes 1.29 å‘å¸ƒï¼šå¼•å…¥åŸç”Ÿè¾¹ç¼˜è®¡ç®—æ”¯æŒ",
          "highlights": [
            "æ–°å¢ EdgeNode èµ„æºç±»å‹",
            "GPU è°ƒåº¦å™¨æ€§èƒ½æå‡ 40%",
            "ä¿®å¤ 15 ä¸ªå®‰å…¨æ¼æ´"
          ],
          "categories": {
            "features": ["EdgeNode support", "AI workload optimization"],
            "fixes": ["Security patches", "Scheduler bugs"],
            "docs": ["Chinese documentation update"]
          }
        },
        "stats": {
          "commits": 127,
          "authors": 45,
          "insertions": 12450,
          "deletions": 8920
        }
      }
    ]
  }
}
```

## 5. æ€§èƒ½ä¼˜åŒ–

### 5.1 å¹¶å‘ç­–ç•¥
- ä½¿ç”¨ goroutine æ± å¤„ç†å¤šä¸ªä»“åº“
- æ¯ä¸ªä»“åº“çš„åˆ†æåœ¨ç‹¬ç«‹ goroutine ä¸­æ‰§è¡Œ
- å®ç°èƒŒå‹æ§åˆ¶ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º

### 5.2 ç¼“å­˜æœºåˆ¶
- ç¼“å­˜ LLM ç”Ÿæˆçš„æ€»ç»“ï¼ˆåŸºäº commit hashï¼‰
- ç¼“å­˜ä»“åº“å…ƒæ•°æ®
- å®ç°å¢é‡åˆ†ææ¨¡å¼

### 5.3 èµ„æºé™åˆ¶
- é™åˆ¶åŒæ—¶åˆ†æçš„ä»“åº“æ•°é‡
- è®¾ç½®å•ä»“åº“åˆ†æè¶…æ—¶
- å®ç°å†…å­˜ä½¿ç”¨ç›‘æ§

## 6. é”™è¯¯å¤„ç†

### 6.1 å®¹é”™è®¾è®¡
- å•ä¸ªä»“åº“å¤±è´¥ä¸å½±å“æ•´ä½“
- Git æ“ä½œå¤±è´¥è‡ªåŠ¨é‡è¯•
- LLM è°ƒç”¨å¤±è´¥é™çº§åˆ°è§„åˆ™å¼•æ“

### 6.2 é”™è¯¯åˆ†ç±»
```go
type ChangelogError struct {
    Type     ErrorType
    Repo     string
    Message  string
    Cause    error
    Retryable bool
}

const (
    ErrorTypeGit      ErrorType = "git"
    ErrorTypeLLM      ErrorType = "llm"
    ErrorTypeAnalysis ErrorType = "analysis"
    ErrorTypeTimeout  ErrorType = "timeout"
)
```

## 7. é…ç½®ç®¡ç†

### 7.1 å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç®€å†™ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| --since | -s | 24h ago | å¼€å§‹æ—¶é—´ |
| --until | -u | now | ç»“æŸæ—¶é—´ |
| --days | -d | 1 | æœ€è¿‘Nå¤© |
| --mode | -m | fast | åˆ†ææ¨¡å¼ |
| --language | -l | zh | è¾“å‡ºè¯­è¨€ |
| --format | -f | markdown | è¾“å‡ºæ ¼å¼ |
| --workers | -w | 10 | å¹¶å‘æ•° |

### 7.2 é…ç½®æ–‡ä»¶æ”¯æŒ

```yaml
# .reposense/changelog.yaml
changelog:
  defaultMode: deep
  defaultLanguage: zh
  timeRange:
    defaultDays: 7
  analysis:
    includePatterns:
      - "*.go"
      - "*.py"
    excludePatterns:
      - "vendor/*"
      - "node_modules/*"
  llm:
    provider: openai
    model: gpt-4
    temperature: 0.3
```

## 8. æµ‹è¯•ç­–ç•¥

### 8.1 å•å…ƒæµ‹è¯•
- CommitAnalyzer çš„æäº¤ä¿¡æ¯è§£æ
- DiffAnalyzer çš„å·®åˆ†åˆ†æ
- Summary ç”Ÿæˆé€»è¾‘

### 8.2 é›†æˆæµ‹è¯•
- Git æ“ä½œçš„æ­£ç¡®æ€§
- LLM é›†æˆçš„ç¨³å®šæ€§
- å¹¶å‘å¤„ç†çš„æ­£ç¡®æ€§

### 8.3 æ€§èƒ½æµ‹è¯•
- å¤§è§„æ¨¡ä»“åº“çš„å¤„ç†èƒ½åŠ›
- å†…å­˜ä½¿ç”¨æƒ…å†µ
- API è°ƒç”¨ä¼˜åŒ–

## 9. å®æ–½è®¡åˆ’

### Phase 1: åŸºç¡€åŠŸèƒ½
- å®ç°åŸºæœ¬çš„ commit åˆ†æ
- æ”¯æŒ fast æ¨¡å¼
- åŸºç¡€çš„ Markdown è¾“å‡º

### Phase 2: é«˜çº§åˆ†æ
- å®ç° deep å’Œ full æ¨¡å¼
- é›†æˆ diff åˆ†æ
- æ·»åŠ ç»Ÿè®¡ä¿¡æ¯

### Phase 3: LLM é›†æˆ
- é›†æˆç°æœ‰ LLM æ¡†æ¶
- ä¼˜åŒ–æç¤ºè¯
- å®ç°ç¼“å­˜æœºåˆ¶

### Phase 4: ä¼˜åŒ–å®Œå–„
- æ€§èƒ½ä¼˜åŒ–
- é”™è¯¯å¤„ç†å®Œå–„
- æ–‡æ¡£å’Œæµ‹è¯•

## 10. æ€»ç»“

`reposense changelog` åŠŸèƒ½å°†æå¤§æå‡å¼€å‘è€…è¿½è¸ªå¤šä¸ªä»£ç åº“æ›´æ–°çš„æ•ˆç‡ã€‚é€šè¿‡æ™ºèƒ½åˆ†æå’Œçµæ´»çš„è¾“å‡ºæ ¼å¼ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€ŸæŒæ¡ä»£ç åº“çš„æœ€æ–°åŠ¨æ€ã€‚è¯¥è®¾è®¡å……åˆ†è€ƒè™‘äº†æ€§èƒ½ã€å¯æ‰©å±•æ€§å’Œç”¨æˆ·ä½“éªŒï¼Œä¸ RepoSense çš„æ•´ä½“æ¶æ„ä¿æŒä¸€è‡´ã€‚